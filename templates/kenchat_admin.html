<!DOCTYPE html>
<html>
<head>
    <title>KenWeb Admin Panel</title>
</head>
<body>

<h1>KenWeb Admin Panel</h1>
<hr>

{% if not session.get("admin_logged_in") %}

<h2>Admin Login</h2>

<form method="post">
    <label>Password:</label><br>
    <input type="password" name="password">
    <br><br>
    <input type="submit" value="Login">
</form>

{% else %}

<p><b>Status:</b> Logged in</p>

<hr>

<h2>KenBot API Settings</h2>

<p>Current API server:</p>
<p>
<code>
{{ session.get("kenbot_api_url", "Not set") }}
</code>
</p>

<form method="post" action="{{ url_for('set_kenbot_api') }}">
    <label>API URL:</label><br>
    <input type="text" name="api_url" size="40"
           placeholder="http://127.0.0.1:8000">
    <br><br>
    <input type="submit" value="Save API URL">
</form>

<hr>

<h2>Chat Rooms</h2>

<ul>
{% for room in rooms %}
    <li>
        {{ room }}
        {% if room != "general" %}
        <form method="post" action="{{ url_for('delete_room') }}" style="display:inline;">
            <input type="hidden" name="room_name" value="{{ room }}">
            <input type="submit" value="Delete">
        </form>
        {% endif %}
    </li>
{% endfor %}
</ul>

<h3>Create New Room</h3>

<form method="post" action="{{ url_for('create_room') }}">
    <input type="text" name="new_room" placeholder="room name">
    <input type="submit" value="Create">
</form>

<hr>

<form method="get" action="{{ url_for('admin_logout') }}">
    <input type="submit" value="Logout">
</form>

{% endif %}

</body>
</html>

